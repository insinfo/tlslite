# dart run ffigen --config ffigen.yaml
# https://slproweb.com/products/Win32OpenSSL.html
name: OpenSsl
description: Bindings to OpenSSL for Dart.
output: 'lib/src/openssl/generated/ffi.dart'
llvm-path:
  - 'C:/LLVM'  # pasta onde está o clang.exe

headers:
  entry-points:
    - 'C:/Progra~1/OpenSSL-Win64/include/openssl/ssl.h'
    - 'C:/Progra~1/OpenSSL-Win64/include/openssl/crypto.h'
    - 'C:/Progra~1/OpenSSL-Win64/include/openssl/evp.h'
    - 'C:/Progra~1/OpenSSL-Win64/include/openssl/err.h'

compiler-opts:
  # OpenSSL
  - '-IC:/Progra~1/OpenSSL-Win64/include'
  - '-IC:/Progra~1/OpenSSL-Win64/include/openssl'

  # MSVC (ajuste a versão 14.41.34120 se for diferente aí)
  - '-IC:/Progra~1/MICROS~4/2022/Community/VC/Tools/MSVC/14.41.34120/include'

  # Windows SDK / UCRT (ajuste a versão 10.0.26100.0)
  - '-IC:/PROGRA~2/WI3CF2~1/10/Include/10.0.26100.0/ucrt'
  - '-IC:/PROGRA~2/WI3CF2~1/10/Include/10.0.26100.0/shared'
  - '-IC:/PROGRA~2/WI3CF2~1/10/Include/10.0.26100.0/um'
 # >>> Supressão de warnings barulhentos do Windows SDK
  - '-Wno-everything'
preamble: |
  // ignore_for_file: camel_case_types, non_constant_identifier_names, unused_element
  // ignore_for_file: constant_identifier_names, public_member_api_docs
  // ignore_for_file: unused_field, lines_longer_than_80_chars
functions:
  include:
    - BIO_ctrl
    - BIO_new
    - BIO_read
    - BIO_s_mem
    - BIO_write
    - BIO_free
    - BIO_free_all
    - BIO_ADDR_new
    - BIO_ADDR_free
    - BN_new
    - BN_set_word
    - BN_free
    - DTLS_client_method
    - DTLS_server_method
    - ERR_get_error
    - ERR_error_string
    - RSA_new
    - RSA_free
    - RSA_generate_key_ex
    - EVP_PKEY_CTX_new_from_name
    - EVP_PKEY_CTX_new_id
    - EVP_PKEY_CTX_free
    - EVP_PKEY_fromdata
    - EVP_PKEY_fromdata_init
    - EVP_PKEY_new
    - EVP_PKEY_set1_RSA
    - EVP_PKEY_free
    - EVP_sha256
    - SSL_CTX_new
    - SSL_CTX_set_cipher_list
    - SSL_CTX_set_default_verify_paths
    - SSL_CTX_set_verify
    - SSL_CTX_use_PrivateKey_file
    - SSL_CTX_use_certificate_file
    - SSL_connect
    - SSL_accept
    - SSL_do_handshake
    - SSL_ctrl
    - SSL_free
    - SSL_shutdown
    - SSL_get0_param
    - SSL_get_error
    - SSL_new
    - SSL_read
    - SSL_set_bio
    - SSL_set_connect_state
    - SSL_set_fd
    - SSL_write
    - SSL_get1_supported_ciphers
    - X509_VERIFY_PARAM_set1_host
    - SSL_CTX_get_cert_store
    - SSL_set_psk_client_callback
    - TLS_client_method
    - TLS_server_method
    - X509_STORE_add_cert
    - d2i_X509
    - X509_free
    - X509_new
    - X509_set_version
    - ASN1_INTEGER_new
    - ASN1_INTEGER_set
    - X509_set_serialNumber
    - ASN1_INTEGER_free
    - X509_getm_notBefore
    - X509_getm_notAfter
    - X509_gmtime_adj
    - X509_NAME_new
    - X509_NAME_add_entry_by_txt
    - X509_set_issuer_name
    - X509_set_subject_name
    - X509_NAME_free
    - X509_set_pubkey
    - X509_sign
    - PEM_write_bio_PrivateKey
    - PEM_write_bio_X509
    - SSL_CTX_free
    - SSL_CTX_set_info_callback
    - DTLSv1_listen
    - SSL_CTX_set_cookie_generate_cb
    - SSL_CTX_set_cookie_verify_cb
    - SSL_CTX_set_psk_server_callback
    - SSL_CTX_use_psk_identity_hint
    - SSL_set_accept_state
    - OPENSSL_version_major
    - OPENSSL_version_minor
    - OPENSSL_version_patch
    - SSL_CTX_set_security_level
    - PEM_read_bio_X509
    # EVP Cipher functions for crypto comparison tests
    - EVP_CIPHER_CTX_new
    - EVP_CIPHER_CTX_free
    - EVP_CIPHER_CTX_ctrl
    - EVP_EncryptInit_ex
    - EVP_EncryptUpdate
    - EVP_EncryptFinal_ex
    - EVP_DecryptInit_ex
    - EVP_DecryptUpdate
    - EVP_DecryptFinal_ex
    - EVP_aes_128_gcm
    - EVP_aes_256_gcm
    - EVP_aes_128_cbc
    - EVP_aes_256_cbc
    - EVP_aes_128_ccm
    - EVP_aes_256_ccm
    - EVP_chacha20_poly1305
    - EVP_chacha20
    # Poly1305 and HMAC
    - EVP_MAC_CTX_new
    - EVP_MAC_CTX_free
    - EVP_MAC_init
    - EVP_MAC_update
    - EVP_MAC_final
    - EVP_MAC_fetch
    - EVP_MAC_free
    # OSSL_PARAM for EVP_MAC
    - OSSL_PARAM_construct_utf8_string
    - OSSL_PARAM_construct_octet_string
    - OSSL_PARAM_construct_end
    # SHA functions
    - EVP_sha1
    - EVP_sha256
    - EVP_sha384
    - EVP_sha512
    - EVP_MD_CTX_new
    - EVP_MD_CTX_free
    - EVP_DigestInit_ex
    - EVP_DigestUpdate
    - EVP_DigestFinal_ex
    # HMAC
    - HMAC
    - HMAC_CTX_new
    - HMAC_CTX_free
    - HMAC_Init_ex
    - HMAC_Update
    - HMAC_Final
macros:
  include:
    - BIO_C_SET_BUF_MEM_EOF_RETURN
    - SSL_CTRL_SET_TLSEXT_HOSTNAME
    - SSL_ERROR_SSL
    - SSL_ERROR_ZERO_RETURN
    - SSL_ERROR_SYSCALL
    - SSL_VERIFY_NONE
    - SSL_VERIFY_PEER
    - TLSEXT_NAMETYPE_host_name
    - DTLS_CTRL_GET_TIMEOUT
    - SSL_AD_CLOSE_NOTIFY
    - SSL3_AL_FATAL
    - SSL_AD_UNEXPECTED_MESSAGE
    - EVP_CTRL_GCM_SET_IVLEN
    - EVP_CTRL_GCM_GET_TAG
    - EVP_CTRL_GCM_SET_TAG
    - EVP_CTRL_CCM_SET_IVLEN
    - EVP_CTRL_CCM_GET_TAG
    - EVP_CTRL_CCM_SET_TAG
    - EVP_CTRL_AEAD_SET_IVLEN
    - EVP_CTRL_AEAD_GET_TAG
    - EVP_CTRL_AEAD_SET_TAG
structs:
  include:
    - timeval
unions:
  include: []
enums:
  include: []
globals:
  include: []
unnamed-enums:
  include: []

silence-enum-warning: true  
